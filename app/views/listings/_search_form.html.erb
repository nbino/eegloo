<% remote_form_for(
        :search_listing,
        :url => search_listings_path,
        :complete => "$('search_spinner').hide();" ,
        :before => "$('search_spinner').show();",
        :update => 'listing_list',
        :html=>{:id => 'search_form'}) do |f|
%>



<!--Basics section-->
<div id="basicsSearchFormSection" style="line-height:22px;border-bottom:1px solid #ddd;padding:0px 10px;">
  <h1>basics <%=image_tag "spinner.gif", :id=>"search_spinner", :style=>"display:none", :width => 15, :height => 15 %></h1>


  <div style="cursor:pointer;padding-bottom:5px" onclick="Element.toggle('neighborhood_list');">
        <label>Neighborhood(s):</label>
        <%= image_tag 'plus.gif'%><br/>
  </div>
  
  <div id="neighborhood_list" style="display:none; position:absolute; top:170px; left:135px; color:#000; opacity:0.8;border:1px solid #BBB;padding:4px;background:#EEE;z-index:1500">
    <%= image_tag 'cross.png', :style => 'position:absolute;top:5px;right:5px;cursor:pointer;', :onclick => "Element.toggle('neighborhood_list');"%>
     
      <div style="float:left">
      <input type="checkbox" checked="true" id="all_hoods" name="all_nhoods" value="all" onchange="$$('input[name=\'nhoods[]\']').each(function(checkbox){checkbox.checked=this.checked});if(this.checked){<%= auto_submit('search_form')%>}">All<br/>
      <% Nhood.find(:all).each_with_index do |nhood, i| %>
      
        <input type="checkbox" checked="true" id="nhood_<%=nhood.id%>" name="nhoods[]" onclick="<%= auto_submit('search_form')%>" value="<%=nhood.id%>"/><%=nhood.name%><br/>
        <%if Nhood.find(:all).size/2.round == i then %></div><div><%end%>
      <% end %>
      </div>
    
  </div>

  <label>Rent:</label>
  <span id="show_rent">$0 to $5000+</span>
          
  <%= slider :search_listing, :rent, 
    :no_of_sliders=>2,  
    :range=>0..5000,
    :values=>[0, 200, 400, 600, 800, 1000, 1250, 1500, 1750, 2000, 2250, 2500, 2750, 3000, 3500, 4000, 4500, 5000],
    :slide=>"$('show_rent').innerHTML= '$'+value[0]+' to $'+value[1] + (5000 == value[1] ? '+' , ''); ",
    :change=>auto_submit('search_form'),
    :restricted=>true
  -%>
  

  <label>Bedrooms:</label>
  <span id="show_type">studio + </span>

  <%= slider :search_listing, :n_bedrooms, 
    :range=>0..5,
    :values=>[0, 1, 2, 3, 4, 5],
    :slide=>"$('show_type').innerHTML= (value[0] ? value[0] + ' bdr +' : 'studio+'); ",
    :change=>auto_submit('search_form'),
    :restricted=>true
  -%>

  <label>Size:</label>
  <span id="show_sqft">0</span> ft<sup>2</sup>+
  <%=slider :search_listing, :sq_footage, 
        :range=>0..2500,
        :values=>[0,200, 400, 600, 750, 1000,1250,1500,2000,2500],
        :slide=>"$('show_sqft').innerHTML=value;",
        :change=>auto_submit('search_form')
  -%>
         
  <label>Ceiling height:</label>
  <span id="show_c_height">0</span> ft+
  <%= slider :search_listing, :ceiling_height, 
        :range=>8..20,
        :values=>[0, 8, 10, 12, 14, 16, 18,20],
        :slide=>"$('show_c_height').innerHTML=value;",
        :change=>auto_submit('search_form')
  -%>
  
  <label>No of bathrooms:</label>
  <span id="show_bath_no">1</span>+
  <%= slider :search_listing, :ceiling_height, 
        :range=>1..3,
        :values=>[1, 2, 3],
        :slide=>"$('show_bath_no').innerHTML= value",
        :change=>auto_submit('search_form')
  -%>       

  <label>Avail:</label> <%= f.calendar_date_select :avail_date, :size => 9, :popup => "force", :onchange=> auto_submit('search_form')%><br/>
  <br/>
</div>
<!--/Basics section-->

<!--Apt details section-->
<div id="aptDetailsSearchFormSection" style="line-height:22px;border-bottom:1px solid #ddd;padding:0px 10px;">
  <h1>apt. details</h1> 

  <%=f.column_of_autosubmit_checkboxes :convertable,
         :convertable, 
          :separate_kitchen,
          [:maintenance_q, 'Excellent maintenance'],
          [:appliances_q, 'Excellent appliances'],
          [:bathroom_q, 'Excellent bathroom'],
          [:heat_q, 'Good heat'],
          [:ac_type, 'Central A/C'],
          [:floor_type, 'Hardwood floor'],
          [:street_noise_level, 'Quiet street'],
          [:nbors_noise_level, 'Quiet neighbors'],
          :pests_free,
          [:cellphone_q, 'Good cell reception'],
          :rent_controlled,
          :rent_stabilized,
          :balcony, 
          :multi_level,
          :penthouse,
          :loft,
          :patio,
          :private_entrance
  %>
</div>
<!--/Apt details section-->

<!--Building details section-->
<div id="aptDetailsSearchFormSection" style="line-height:22px;padding:0px 10px;">
  <h1>building details</h1> 
  <%=f.column_of_autosubmit_checkboxes :elevator,
          :laundry,
          :gym,
          :doorman,
          :cats_allowed,
          :dogs_allowed,
          :roof_access
  %>
</div>
<!--/Building details section-->

<%=f.hidden_field :page, :value=>1%>
					

<% end %>
				

